## 软件可靠性实验

### 影响可靠性的因素

- 环境

  > 温湿度、时间、气压、光、震动与跌落、粉尘、雷击、静电

- 电磁干扰

  > 电磁波、电源波动、强磁场

- 部件寿命及故障

- 误操作
  > 用户的学习成本、与用户的交互

### 软件可靠性设计

- 抗干扰设计
  - 输入输出信号的软件抗干扰措施
    - 在内存中对端口建立映像
    - 首先写内存，再用内存刷新端口
    - 如何保存内存可靠
      - 将重要数据做成数据单元(数据内容+数据校验码)
      - 重要的数据做成软件备份(多备份，拉开一定的距离)
      - 注意用正确的数据刷新错误的备份数据
    - **==只在出错情况下做还是周期性？==**
      - 对于数字输入：重复配置及输入滤波
      - 对于数字输出：重复配置及输出刷新
  - 数字滤波
    - 保证输入数据的可靠性
      - 多次读取并进行适当的滤波
    - 滤波方法
      - 程序判断滤波(变化范围)
      - 中值滤波
      - 算术平均滤波(存平滑性与灵敏度矛盾)
        - 如果对灵敏度有要求可采用滑动滤波
          - 使用队列保存之前值
      - 去极值平均滤波(存平滑性与灵敏度矛盾)
      - 加权平均滤波(多次不同加权)
      - 低、高、带通滤波
  - CPU抗干扰技术
    - 人工复位
    - 掉电保护
    - 休眠躲避干扰
      - 可以停掉所有时钟，只保留定时器工作
    - NOP指令冗余
      - 最长指令字节数-1可以恢复PC错位
    - 软件陷阱捕获程序
      - 未用空间
        - 在没有用到的空间填充NOP，并在最后填充错误跳转代码
    - 看门狗及运行监视程序
  - 部件寿命管理
    - 例如按键次数和LED亮度
  - 系统恢复
    - 在死机后恢复
      - 通过冷热启动进行判断
      - 要做到透明重入与数据单元备份
        - 备份要拉开一定的距离
      - 保存关键数据(回复代码的数据)
        - 例如跑马灯
          - 哪一个灯亮
          - 灯亮了多长时间
- 容错设计
  - 硬件故障自检
    - 自建类型
      - 上电自检、定时自建、监控自建、空闲自检
    - CPU诊断项目
      - 指令系统、片内RAM、定时器、终端系统、AD通道、数字IO通道
  - 人机界面容错
    - 输入提示
    - 参数输入的容错设计
      - 超市、确认、范围、默认、连击、复合、再确认
    - 命令输入的容错设计
      - 超时退出、确认、完备性
    - 输入界面的安全性设计
      - 锁键、超时退出
    - 输出的容错设计
  - 一般软件容错
    - 堆栈溢出预防
      - 减少程序嵌套、防中断溢出、减少栈传递参数(多参数可以用数据结构传指针)、减少临时变量、少用资源需求不清晰的库
    - 中断中的资源冲突与预防
      - 敏感资源互斥
    - 状态转移的条件审查
      - 通过数据单元检查状态是否合法被改变
      - 特别是控制系统
    - 重要模块入口检查及序列检查
      - 使用队列(存储前序模块id)检查前序模块是否运行
    - 软件算法容错设计
      - 出错信息设计、减少累计误差、复杂运算查表(加速运行，有更多时间休眠)、软件标志及校验
    - 安全存储
      - 校验、备份、加密



## 报考提交时间

- 下周三

